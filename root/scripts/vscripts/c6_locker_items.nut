local locker_spawns = {
    pipe_bomb = {
        model = "models/w_models/weapons/w_eq_pipebomb.mdl"
        name = "pipebomb"
        props = [
            { relpos = Vector(-8.074219, 15.925201, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-6.071289, 13.925385, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-3.074951, 11.925110, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(1.926270, 15.925232, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(6.924805, 17.925079, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-3.068848, 15.925629, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-2.076660, 8.924988, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-7.068359, 4.925720, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-5.071289, -1.074188, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-0.077393, -2.075470, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(2.922607, 4.924500, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(5.925049, 6.925140, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-2.072998, 4.925354, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-6.073486, -7.074341, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-9.072266, -13.075104, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-7.069092, -15.074097, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-4.072998, -17.075165, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(0.928467, -13.074432, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(5.927002, -11.075073, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-4.076904, -13.075165, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(3.925049, -15.074524, 0), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-3.074219, -20.075073, -2), relang = QAngle(81, 180, -165)}

        ]
        items = [
            { relpos = Vector(-2.073730, -10.089539, 2.995239), relang = QAngle(90, 164.988297, 0)}
            { relpos = Vector(3.941406, -0.086761, 2.995239), relang = QAngle(90, 45.017574, 0)}
        ]
    }

    pain_pills = {
        model = "models/w_models/weapons/w_eq_painpills.mdl"
        name = "pills"
        props = [
            { relpos = Vector(-3.074951, 11.925140, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(4.928711, 17.925507, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-2.076660, 8.925018, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-5.071533, -1.074188, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(2.922363, 4.924500, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-2.072998, 4.925385, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-9.072266, -13.075073, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-4.072998, -17.075165, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(5.926758, -11.075104, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(3.924805, -15.074524, 0), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-3.074219, -20.075073, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-4.076904, -13.075134, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(0.928467, -13.074402, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-7.069336, -15.074097, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-6.073486, -7.074310, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(5.924805, 6.925140, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-0.077393, -2.075470, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(-7.068359, 4.925751, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-3.069092, 15.925629, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(1.926270, 15.925262, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-6.071533, 13.925385, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-8.074463, 15.925232, 1), relang = QAngle(81, 90, -165)}

        ]
        items = [
            { relpos = Vector(3.941406, -0.086761, 2.995239), relang = QAngle(90, 45.017574, 0)}
            { relpos = Vector(-2.073730, -10.089539, 2.995239), relang = QAngle(90, 164.988297, 0)}
        ]
    }
    molotov = {
        model = "models/w_models/weapons/w_eq_molotov.mdl"
        name = "molotov"
        props = [
            { relpos = Vector(-3.074951, 11.925110, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(4.928711, 17.925476, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-2.076660, 8.924988, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-5.071289, -1.074188, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(2.922607, 4.924500, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-2.072998, 4.925354, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-9.072021, -13.075073, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-4.072998, -17.075165, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(5.927002, -11.075073, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(3.925049, -15.074524, 0), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-3.074219, -20.075073, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-4.076904, -13.075165, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(0.928467, -13.074432, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-7.069092, -15.074097, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-6.073486, -7.074341, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(5.925049, 6.925140, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-0.077393, -2.075470, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(-7.068359, 4.925720, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-3.068848, 15.925629, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(1.926270, 15.925262, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-6.071289, 13.925385, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-8.074219, 15.925201, 1), relang = QAngle(81, 90, -165)}

        ]
        items = [
            { relpos = Vector(3.941406, -0.086761, 2.995239), relang = QAngle(90, 45.017574, 0)}
            { relpos = Vector(-2.073730, -10.089539, 2.995239), relang = QAngle(90, 164.988297, 0)}
        ]
    }
    adrenaline = {
        model = "models/w_models/weapons/w_eq_adrenaline.mdl"
        name = "adrenaline"
        props = [
            { relpos = Vector(-3.074951, 11.925110, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(4.928711, 17.925476, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-2.076660, 8.924988, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-5.071289, -1.074188, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(2.922607, 4.924500, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-2.072998, 4.925354, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-7.075928, -13.074463, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-4.072998, -17.075165, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(4.924072, -11.074799, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(3.925049, -15.074493, 0), relang = QAngle(81, 60, -165)}
            { relpos = Vector(-3.074219, -20.075073, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(-4.076660, -13.075134, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(0.928711, -13.074402, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-7.069092, -15.074097, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-6.073486, -7.074341, -2), relang = QAngle(81, 180, -165)}
            { relpos = Vector(4.931885, 6.925690, 1), relang = QAngle(81, 135, -165)}
            { relpos = Vector(-0.077393, -2.075470, 1), relang = QAngle(81, -75.000008, -165)}
            { relpos = Vector(-7.068359, 4.925720, 1), relang = QAngle(81, 90, -165)}
            { relpos = Vector(-3.068848, 15.925629, -2), relang = QAngle(81, 60, -165)}
            { relpos = Vector(1.926514, 15.925262, 1), relang = QAngle(81, -105.000008, -165)}
            { relpos = Vector(-6.071289, 13.925385, 1), relang = QAngle(81, 105, -165)}
            { relpos = Vector(-7.071289, 15.925385, 1), relang = QAngle(81, 90, -165)}

        ]
        items = [
            { relpos = Vector(3.941406, -0.086761, 2.995239), relang = QAngle(90, 45.017574, 0)}
            { relpos = Vector(-2.073730, -10.089539, 2.995239), relang = QAngle(90, 164.988297, 0)}
        ]
    }
}

local item_classes = {
    ['b'] = "pipe_bomb",
    ['p'] = "pain_pills",
    ['m'] = "molotov",
    ['a'] = "adrenaline"
};

function FillWithMolotov() {
    FillLocker(caller, 'm');
}
function FillWithPipebomb() {
    FillLocker(caller, 'b');
}
function FillWithAdrenaline() {
    FillLocker(caller, 'a');
}
function FillWithPills() {
    FillLocker(caller, 'p');
}

function FillLocker(locker, item_class_index) {
    local locker_prefix = locker.GetContext("locker_prefix");
    local locker_suffix = locker.GetContext("locker_suffix");
    locker_prefix = locker_prefix == null ? "" : split(locker_prefix, "#")[0];
    locker_suffix = locker_suffix == null ? "" : split(locker_suffix, "#")[0];

    local item_class = item_classes[item_class_index];
    local spawns = locker_spawns[item_class];
    local model = spawns.model;
    local name = spawns.name;
    local props = spawns.props;
    local items = spawns.items;

    local locker_origin = locker.GetOrigin();
    local locker_angles = locker.GetAngles();

    foreach (prop in props) {
        SpawnEntityFromTable("prop_dynamic_override", {
            targetname = locker_prefix + "prop_" + name + locker_suffix,
            origin = locker_origin + RotatePosition(locker_origin, locker_angles, prop.relpos),
            angles = RotateOrientation(locker_angles, prop.relang).ToKVString(),
            solid = 6,
            disableshadows = 1,
            disablereceiveshadows = 1,
            fademindist = 1501,
            fademaxdist = 1920,
            model = model
        });
    }

    foreach (item in items) {
        SpawnEntityFromTable("weapon_" + item_class + "_spawn", {
            targetname = locker_prefix + name + locker_suffix,
            origin = locker_origin + RotatePosition(locker_origin, locker_angles, item.relpos),
            angles = (locker_angles + item.relang).ToKVString(),
            count = 1,
            spawnflags = 10 //must exist | infinite spawn
        });
    }
}
